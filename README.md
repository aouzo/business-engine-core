
# 业务引擎核心项目

## 1、项目目标:
1. 各种异构业务数据, 生成财务凭证
2. 有良好的扩展性
3. 对扩展和自定义的业务模板, 可验证正确性


## 2、当前完成功能:
1. 项目独立于现有业务系统
2. 模板基本验证逻辑
3. 使用现有模板生成凭证

## 3、待完成功能:
0. 与现有项目的非源码的继承
1. 完整的模板静态验证
2. 完整的凭证生成的验证逻辑
3. 项目内的凭证验证过程: 生成业务dto -> 审核生成凭证 -> 凭证正确性验证
4. 上层业务系统, 不同DTO的无缝支持 
5. 模板的扩展设计: 影响因素\取数公式\行业
6. 前端维护界面, 支持系统级的运营支持, 可增删改\合并等处理
7. 支持用户自定义扩展个性化模板
8. 模板数据在工程内存储
9. 对于dto是否符合业务模板的通用校验(业务对象从Excel导入等场景)


## 4、附:
### 模板静态校验规则(持续扩展):
a）字段规则--各模板是否同时结算或不结算
b）交叉规则--影响因素字段的必填是否一致（凭证模板没有“默认”则为必填）
c）交叉规则--支持的行业是否一致
d）字段规则--遗漏票据类型、错漏税率、错漏纳税人身份、错漏行业、错漏字段）
e）凭证规则--凭证影响因素和扩展影响因素是否一致
f）凭证规则--是否缺少"默认"
g）凭证规则--取数表达式是否合法
h）字段规则--勾选“资产分类”、“存货”、“资产”字段，必须在规则表“业务和存货对照表”、“资产分类”对照表里能找到规则
i）税率必填的情况下, 是否有明确可选税率范围

## 生成凭证校验规则(持续扩展):
a）构建dto的模拟数据
b）遍历各个影响因素
c）根据模板验证凭证科目和金额是否正确